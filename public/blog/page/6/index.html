
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>The Technician</title>
	<meta name="author" content="Chris Henry">

	
	<meta name="description" content="This post could alternately be titled: &#8216;How to make developers hate you.&#8217; A very common criticism of MySQL is that there is no support &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="The Technician" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">The Technician</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:chr.ishenry.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/chrishnry" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/chrishenry" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
		
		<a class="feedly" title="Feedly" href="http://cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fchr.ishenry.com%2Fatom.xml" target="blank">Feedly</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:chr.ishenry.com">
	</form>
</nav>

</header>
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/2010/05/03/mysql-slave-delay-and-maatkit/">
		
			MySQL Slave Delay and Maatkit</a>
	</h2>
	<div class="entry-content">
		<p>This post could alternately be titled: &#8216;How to make developers hate you.&#8217;</p>

<p>A very common criticism of MySQL is that there is no support for delayed
replication. Delaying data flowing from master to slave can be very useful in
certain cases. For example, running a co-located slave for backups is still
susceptible to data problems that caused by a DELETE with no where or a
mistaken executed DROP. However, by running the slave anywhere from an hour to
a day behind, you have the opportunity to catch whatever problems caused and
have a good copy of your data ready to go.</p>

<p>In <a href="http://chr.ishenry.com/2010/02/22/sandboxes/">sandbox environments</a>, a
consistent slave delay is a great way to reproduce race conditions. In fact,
running slave delay gives you the opportunity to ensure that data will be out
of sync between the master and slave. When you can count on this part of the
environment, developers can test and write code against this condition. Of
course, in reality, working in this type of environment is reaally annoying,
but necessary.</p>

<p>Delayed MySQL replication can be accomplished by using a tool from the
<a href="http://www.maatkit.org/">maatkit</a> library. Documentation for the tool can be
found at <a href="http://www.maatkit.org/doc/mk-slave-delay.html">[http://www.maatkit.org/doc/mk-slave-
delay.html](http://www.maatkit.org/doc/mk-slave-
delay.html)</a>. What&#8217;s great
about this tool is that can be run as a daemon, so that it can be easily run
for an extended period of time, without have to do any serious management.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-05-03T00:00:00-04:00" pubdate data-updated="true">May 3<span>rd</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/mysql/'>MySQL</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2010/04/02/mysql-skip-name-resolve/">
		
			MySQL Skip-name-resolve</a>
	</h2>
	<div class="entry-content">
		<p>Small, obscure optimizations sometimes have the potential to make the greatest
impact. For example, every time a connection is made, MySQL will do a
<a href="http://l.chr.ishenry.com/mbukt">DNS</a> lookup of the host that is trying to
connect. If MySQL is handling many connections, the overhead of an extra DNS
lookup can be hefty, simply because of the number of extra operations that
have to be performed before MySQL can actually start doing actual <em>work</em>.</p>

<p>Thankfully, there is an option in recent versions (4.1+) of MySQL that will
instruct MySQL to skip the extra DNS lookup. It&#8217;s a fairly obscure option
called <a href="http://l.chr.ishenry.com/elgrt">skip-name-resolve</a>. The only caveat to
using this option is that the users defined the GRANT tables can only use IP
addresses as hostnames. For most MySQL users, this shouldn&#8217;t be an issue.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-04-02T00:00:00-04:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/best-practices/'>Best Practices</a>, <a class='category' href='/blog/categories/mysql/'>MySQL</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2010/02/22/sandboxes/">
		
			Sandboxes</a>
	</h2>
	<div class="entry-content">
		<p>Setting up a sandbox environment has normally been a trivial task. Set up a
vhost, get a copy of the database, build out the app, and start doing stuff.
When &#8216;Stuff&#8217; is &#8216;Done&#8217; push the changes onto production, and bask in your own
crapulence. That is, until your data set exceeds the limits of the sandbox,
and the <a href="http://l.chr.ishenry.com/bbhcu">SOA</a> which is saving the day in
production is becoming nothing but a headache in development.</p>

<p>The basic sandbox environment for an app includes a reasonably recent data
set, similar ( underpowered can be OK, depending ) hardware, the exact same
versions of php, mysql and apache. Php, mysql and apache need to be configured
exactly the same way as in production. In fact, as part of this process, it
might be useful to pull down those ever so important configuration files, put
them in a safe place. Perhaps source control (cough). Consistent configuration
is <strong><em>extremely</em></strong> important. Bugs produced by configuration problems are
notoriously hard to reproduce, and result in devs combing through code looking
for bugs that don&#8217;t exist.</p>

<p>Maintaining a few sandboxes should be a trivial endeavor. That is, until your
project gets too big. A natural response to handling ever-growing problems is
use a Service Oriented Architecture; that is, to shard off aspects of the app
and dedicate hardware and resources to it. However, three or four shards
later, multiplied by an environment for each developer, the guy who was doing
sys admin work as needed just became full timer. Unfortunately, there&#8217;s no way
around this, even with a clever sys admin, who can leave enough automated
scripts around so that developers can <em>mostly</em> maintain their own environment.</p>

<p>The fact of the matter is maintaining the development environment is one of
the most important things a company can do. Close attention to detail in the
sandbox will make all the difference in the deployment process. Changes in
code base, file permissions and configuration can all be tested and deployed
the same as in production. So every build to every sandbox (everyone builds
daily, right?) is a chance for the development team to catch mistakes, and
learn from them, before the big push. And if that fails, we all know how to
handle a <a href="http://chr.ishenry.com/2009/05/25/crisis-mo/">crisis</a>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-02-22T00:00:00-05:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/best-practices/'>Best Practices</a>, <a class='category' href='/blog/categories/systems-administration/'>Systems Administration</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2010/02/12/japanese-inspection/">
		
			Japanese Inspection</a>
	</h2>
	<div class="entry-content">
		<p>Everybody procrastinates. Some tasks that get pushed off don&#8217;t matter, it just
gets done later. Some tasks that go over deadline result in profanities and
bloody noses. But every once in a while, tasks come along that have an
expiration date. As in, if it doesn&#8217;t get done by a certain time, it doesn&#8217;t
matter.</p>

<blockquote><p>You ever heard of a &#8220;Japanese Inspection?&#8221; Japanese Inspection, you see,
when the Japs take in a load of lettuce they&#8217;re not sure they wanna let in the
country, why they&#8217;ll just let it sit there on the dock &#8216;til they get good and
ready to look at, But then of course, it&#8217;s all gone rotten… ain&#8217;t nothing left
to inspect. You see, lettuce is a perishable item…like you two monkeys.</p></blockquote>

<ul>
<li><a href="http://www.imdb.com/title/tt0099371/">Big John, <em>Days of Thunder</em></a></li>
</ul>


<p>What Big John was referring to was the fact that all he had to do was ignore
Cole and Rowdy until they didn&#8217;t any fight left in them. Tasks can be just the
same way. Eventually, the need for the task to be done just goes away, or
starts to smell. The only thing that really matters is being able to tell the
difference between the things that <strong>really</strong> need to get done, and the things
that just aren&#8217;t important enough to get done.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-02-12T00:00:00-05:00" pubdate data-updated="true">Feb 12<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/best-practices/'>Best Practices</a>, <a class='category' href='/blog/categories/web-dev-teams/'>Web Dev Teams</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2010/01/29/sphinx-full-text-search-engine/">
		
			Sphinx Full Text Search Engine</a>
	</h2>
	<div class="entry-content">
		<p>For a very long time, I was convinced that a FULLTEXT index in MySQL was the
best solution for all your searching needs. Then I realized that it was
horribly slow, and mixing with complex joins completely destroyed any chances
of using MySQL indexes in any way that would make sense or get decent results.
The solution to fast and scalable free text search on any website is, of
course, a Full Text search engine.</p>

<p>There are a few different ones out there. After a brief affair with Lucene, I
settled on Sphinx. Sphinx is easy to install, even on 64-bit machines, and is
architected in a way that makes a lot of sense for the web. The following
steps were performed on a Red Hat machine. Don&#8217;t skip the mysql-dev install,
even if you already MySQL installed.</p>

<figure class='code'><figcaption><span>Sphinx installation  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>yum install gcc-c++
</span><span class='line'>yum install mysql-dev*
</span><span class='line'>wget http://www.sphinxsearch.com/downloads/sphinx-0.9.9.tar.gz
</span><span class='line'>tar xzvf sphinx-0.9.9.tar.gz
</span><span class='line'>mkdir /usr/local/sphinx
</span><span class='line'>./configure --prefix /usr/local/sphinx --with-mysql&gt; ./make
</span><span class='line'>make install
</span></code></pre></td></tr></table></div></figure>


<p>Once installed, it&#8217;s fairly simple to start playing with the packaged example
data and queries. The php APIs make integration easy, either to build a
service, or use locally as a substitute for MySQL. In fact, as long as the
index can be kept reasonably up to date, Sphinx is a better choice for
complicated sorts than MySQL.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-01-29T00:00:00-05:00" pubdate data-updated="true">Jan 29<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/development/'>Development</a>, <a class='category' href='/blog/categories/web-architecture/'>Web Architecture</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2010/01/07/google-short-links/">
		
			Google Short Links</a>
	</h2>
	<div class="entry-content">
		<p>Having your own domain and server is a really fun thing. You can keep a blog,
store files, post photos. All good ole down-home interwebz fun you can dream
up. With the advent of micro-blogging, everyone now has an audience they need
to communicate with in the briefest fashion.</p>

<p>Short links have become the norm for sharing, but with a huge price. Short
links break the interconnectedness of the Internet. Search results that depend
on the count of links become incorrect. Some services try to reconnect links
between domains by using some DNS trickery. But the issue remains that there
is a middleman that can&#8217;t help make the connection.</p>

<p>Unless, of course, that middleman is the search engine. Google&#8217;s recently
announced URL shortener could solve many of the problems inherent with URL
shorteners. By being the middleman, Google would have all the necessary
information to put the pieces back together. It&#8217;s easy enough to set up,
provided you have a Google Apps account. It does not currently have an API,
but here&#8217;s hoping.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-01-07T00:00:00-05:00" pubdate data-updated="true">Jan 7<span>th</span>, 2010</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2009/12/22/30-seconds-to-mars--this-is-war/">
		
			30 Seconds to Mars :: This Is War</a>
	</h2>
	<div class="entry-content">
		<p>30 Seconds to Mars recently released their third album, This is War, and it is
quite the departure from their first album. Brand New Day was raw and angry,
with amazing guitar sounds, great composition, and a real sense of urgency in
the writing. The album was really exciting to listen to, and the live
performances were great. I saw them at Avalon in NYC a few years ago, and it&#8217;s
still one of my all time favorite shows.</p>

<p>This is War is mild and boring in comparison. The effects driven distorted
guitars characteristic to Brand New Day is missing. They seem to have been
replaced with over-produced electronics. Jared Leto has less than half the
intensity than he did in Brand New Day, and the lyrics have lost their edge.
The focus on deeply layered choruses of what sounds like children singing
lacks impact. The collaboration with Kanye and his 808 didn&#8217;t really go
anywhere, and just seemed to pull the band further from their roots. It&#8217;s sad
to hear a band that had such a great band with a unique sound has gone so far
off track.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-12-22T00:00:00-05:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/music/'>Music</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2009/12/12/changing-criteria/">
		
			Changing Criteria</a>
	</h2>
	<div class="entry-content">
		<p>Occasionally, a project will come across my plate with the criteria, &#8216;Make
sure this works everywhere, is completely template-able, and is something we
can grow with.&#8217; Normally this is coupled with &#8216;We need this to work with X
<em>right now</em>, and Y and Z later.&#8217; What I really hear is &#8216;Make it work for X,
and <a href="http://bit.ly/6kpqUc">ship </a> the damn thing.&#8217; After all, hitting those
deadlines is <strong>really</strong> important.</p>

<p>Of course, this has a whole bunch of ugly assumptions tied to it. The first
is: when I get to Y, everything I did for X will work. All I need to do is
drop in a few config changes, and tweak a few parameters, and I&#8217;m done. (Yea,
right) Secondly: that every case Y needs to cover is contained within X. (Not
Likely) Third: All of this will be so well documented that any literate
individual will be able to implement Y by osmosis.</p>

<p>So. Do we spend time now or later? Shipping X seems pretty simple, so why not
just build X, satisfy the business dude and call it a day. Spending time now
means that deadlines may have to shift, and something that should be simple
becomes complex. We have other, more important, projects to work on.</p>

<p>Eventually Y comes calling. So let me introduce you to…Future Web Dev Guy
Person Girl! If you&#8217;re lucky, that person is you. If you&#8217;re not, it&#8217;s another
dev. The assumptions we made back in paragraph 2 have reared their ugly heads.
Since they were assumptions, you&#8217;re probably boned. If not, you&#8217;re probably
one of <a href="http://www.ioinformatics.org/photo/images/p4.jpg">these guys</a>. If
you&#8217;re the rest of us, Future Web Dev Guy Person Girl definitely hates your
guts, because the groundwork that was supposed to be laid out is not there.
They&#8217;re running through a lice-infested rat&#8217;s nest of procedural functions
trying to pass the additional variable that will make this all work.</p>

<p>The best way to keep Future Web Dev Guy Person Girl from cursing like a sailor
is implement correctly, test thoroughly, and deal with Y before it&#8217;s due.
Deadlines need to be managed according to project scope, and if project scope
includes Y, it needs to be accounted for now, before you lose a friend in
Future Web Dev Guy Person Girl.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-12-12T00:00:00-05:00" pubdate data-updated="true">Dec 12<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/best-practices/'>Best Practices</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2009/11/29/the-technician-now-on-a-cloud-server/">
		
			The Technician, Now on a Cloud Server</a>
	</h2>
	<div class="entry-content">
		<p>I am pleased to announce that this site is now hosted on the <a href="http://bit.ly/4LrOTd">Rackspace
Cloud</a>. It was a simple migration from MediaTemple, and
has given me the level of control I want. I got to choose my OS (CentOS),
versions of php and MySQL, and setup apache how I like it. I&#8217;m free of Plesk
and those and the limitations therein.</p>

<p>The one thing I would really like to see from the Rackspace Cloud is DNS
Support. My goal when migrating
<a href="http://chr.ishenry.com">[http://chr.ishenry.com](http://chr.ishenry.com)</a> was
to move entirely off of MediaTemple. The one thing I really did like about
hosting with them was that DNS was integrated directly into the service. With
the Rackspace Cloud, there was no such convenience. However, a quick signup
with <a href="http://bit.ly/8AYkxJ">DynDNS</a> and a tweak to my domain registrar solved
that.</p>

<p>Big thanks to Ryan Kearney&#8217;s <a href="http://bit.ly/8YZtH3">video tutorial</a> for the
yum command that brought everything together.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-11-29T00:00:00-05:00" pubdate data-updated="true">Nov 29<span>th</span>, 2009</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2009/11/04/rackspace-downtime/">
		
			Rackspace Downtime</a>
	</h2>
	<div class="entry-content">
		<p>[Update] My team at Rackspace has sent me the fluffiest, most comfortable
pillow I have ever had.</p>

<p>When a hosting provider goes down, there are lots of questions that get
raised. Is my host reliable? Will they flake out during crucial times when my
site needs the traffic? Will they <a href="http://lmgtfy.com/?q=dreamhost+billing">double
bill</a> me?</p>

<p>Since I have been working with Rackspace, they have had less than stellar
uptime, with issues mostly related to power. My company pays a lot for hosting
with them, and downtime for a young company is deadly. But oddly enough, I&#8217;m
still OK with Rackspace hosting my company&#8217;s myriad services. The benefits of
hosting with them have been so great that a couple hours of downtime is
nothing.</p>

<p>First off, their SLA has provisions for downtime, when it happens. If your
server has a legitimate issue, you&#8217;re entitled to ask for a credit. To me,
this is a promise that they&#8217;ll put their money where their mouth is. And if
you call them on it, they&#8217;ll be reasonable.</p>

<p>Secondly, their support during crises is still amazing. During the <a href="http://bit.ly/9LrNz">truck
incident</a>, I was able to get a tech to run fsck on my
disks, and hang out to watch no questions asked. No, I am not on their
intensive plan.</p>

<p>Third, their support culture is simply amazing. Their linux techs are always
willing to look deep into an issue to find a resolution, and they provide much
of the basic <a href="http://bit.ly/1HkKYJ">infrastructure</a> that is hard to come by
for small companies.. They&#8217;re also completely willing to educate their
customers about the servers they maintain.</p>

<p>In short, Rackspace has been the target of a lot of criticism over issues in
their datacenters. The fact of the matter is that there will always be issues
and downtime. <a href="http://www.rackspace.com/solutions/managed_hosting/s%0Aupport/servicelevels/managedsla.php">Their SLA</a> guarantees the impossible, which they
seem to realize, as any failure on their part comes with swift response. In
the end their SLA seems to be more of a way of setting standards than anything
else.</p>

<p>[Full disclosure: I haven&#8217;t slept in 2 days because of their power issues]</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-11-04T00:00:00-05:00" pubdate data-updated="true">Nov 4<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/horror-stories/'>Horror Stories</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/5/" class="prev">Prev</a>
    
    
        <a href="/blog/page/7/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    Chris Henry

<br /><span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'thetechnician';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-6652794-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
