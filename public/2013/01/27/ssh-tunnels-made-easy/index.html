
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>SSH tunnels made easy - The Technician</title>
	<meta name="author" content="Chris Henry">

	
	<meta name="description" content="One of the classic problems in administering databases is providing secure,
yet accessible tools for all those who need to run queries or examine &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="The Technician" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">The Technician</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:chr.ishenry.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/chrishnry" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/chrishenry" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:chr.ishenry.com">
	</form>
</nav>

</header>
	
		
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/chrishnry">chrishnry</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('chrishnry', 4, false);
	})(jQuery);
</script>

	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">SSH Tunnels Made Easy</h2>
	<div class="entry-content"><p>One of the classic problems in administering databases is providing secure,
yet accessible tools for all those who need to run queries or examine
production data. Classically, phpMyAdmin has been a great tool for handling
MySQL for those who don&#8217;t know the command line. However, as any sysadmin
worth his salt knows, it&#8217;s an extremely insecure tool for a couple of reasons.</p>

<ul>
<li>It requires php, and specific modules, which is just one more thing to install.</li>
<li>It requires apache.</li>
<li>Apache requires port 80 to be open.</li>
</ul>


<p>All of these things are bad, since garden variety attackers and script kiddies
can potentially find your phpmyadmin installation. Since phpMyAdmin is open-
source, and freely available, there always likely to be security holes. One of
the best ways around this is to close phpMyAdmin off to the public via
firewall, and then use an SSH tunnel to pass traffic through another server.
The server hosting mysql and phpMyAdmin can safely stay hidden, with all ports
closed.</p>

<p><img src="/images/user/ssh_tunnel_diagram.gif" alt="Diagram, showing the flow of traffic between client and secure mysql server.
" /></p>

<p>Set up looks something like this (on a Mac, at least).</p>

<ol>
<li><p>Install <a href="http://www.macports.org/install.php">MacPorts</a></p></li>
<li><p>Install Xcode command line dev tools.</p></li>
</ol>


<blockquote><p>Open Xcode -> Preferences -> Downloads -> Command Line Tools</p></blockquote>

<ol>
<li>Install <a href="http://www.harding.motd.ca/autossh/">autossh</a> , which is a tool for opening an ssh connection, and making sure it stays open. I use MacPorts to install it. <a href="http://www.macports.org/">http://www.macports.org/</a></li>
</ol>


<blockquote><p>$ sudo port install autossh</p></blockquote>

<ol>
<li>Once that&#8217;s installed, you can run something like this. (Make sure that the port is the port that you configured Apache to accept traffic on.)</li>
</ol>


<blockquote><p>autossh -M 20002 -f -L 7422:your.db.served.biz.org:7422 your.jump.server.biz
&#8220;sleep 99999999999&#8221;</p></blockquote>

<ol>
<li>From there, you can open phpMyAdmin at a URL like http://localhost:7422/phpMyAdmin. One very convenient way to wrap all this up is to use the automator app.</li>
</ol>


<p><img src="/images/user/ssh_tunnel_auto.png" alt="Automator screenshot" /></p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-01-27T00:00:00-05:00" pubdate data-updated="true">Jan 27<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/security/'>security</a>, <a class='category' href='/blog/categories/ssh/'>ssh</a>, <a class='category' href='/blog/categories/tools/'>tools</a>


</div>
	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Chris Henry

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'thetechnician';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-6652794-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>